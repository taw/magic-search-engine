# Data from: https://magic.wizards.com/en/news/feature/collecting-marvels-spider-man
# And https://magic.wizards.com/en/products/marvel/spider-man/card-image-gallery

pack:
  common_source_slot:
    - common: 7
      chance: 23
    - common: 6
      source_material: 1
      chance: 1
  uncommon_scene: 3
  wildcard: 1
  rare_mythic: 1
  foil: 1
  land:
    - non_foil_land: 1
      chance: 80
    - foil_land: 1
      chance: 20

queries:
  dual_land: "e:{set} number:181,183-186"
  spiderweb_land: "e:{set} number:189-193"
  basic_land: "e:{set} number:194-198"
  scene: "e:{set} number:199-207"
  web_slinger: "e:{set} number:208-217"
  panel: "e:{set} number:218-231"
  source_material: "e:MAR number:1-40"

sheets:
  common:
    query: "r:c -{dual_land}" # Regular common, no dual lands
    count: 60

  uncommon:
    query: "r:u" # Regular uncommon
    count: 55

  rare:
    query: "r:r" # Regular rare
    count: 60

  mythic:
    query: "r:m" # Regular mythic
    count: 20

  uncommon_scene:
    any: # TODO: Is this correct? Does it generate all of them with the same odds?
      - use: uncommon
        rate: 1
      - rawquery: "{scene} r:u" # Uncommon scene
        rate: 1
        count: 3

  web_slinger:
    any:
      - rawquery: "{web_slinger} r:r" # Rare web slinger
        rate: 2
        count: 7
      - rawquery: "{web_slinger} r:m" # Mythic web slinger
        rate: 1
        count: 3

  boosterfun: # TODO: Lots of assumptions here. Numbers are so low it doesn't really matter.
    any:
    - rawquery: "{web_slinger} r:r" # Rare web slinger
      rate: 2
      count: 7
    - rawquery: "{web_slinger} r:m" # Mythic web slinger
      rate: 1
      count: 3
    - rawquery: "{panel} r:r" # Rare panel
      rate: 2
      count: 10
    - rawquery: "{panel} r:m" # Mythic panel
      rate: 1
      count: 4
    - rawquery: "{scene} r:u" # Uncommon scene
      rate: 4 # TODO: CHECK THIS!!
      count: 3
    - rawquery: "{scene} r:r" # Rare scene
      rate: 2
      count: 4
    - rawquery: "{scene} r:m" # Mythic scene
      rate: 1
      count: 2

  wildcard: # See detailed calculations at the end of the file
    any:
      - use: common
        chance: 708 # 70.8%
      - use: uncommon
        chance: 41 # 4.1%
      - use: rare # TODO: maybe combine rare_mythic with a 2:1 rate?
        chance: 209 # 20.9%
      - use: mythic
        chance: 29 # 2.9%
      - use: boosterfun
        chance: 13 # 100% - 70.8% - 4.1% - 20.9% - 2.9% = 1.3%
      
  rare_mythic: # See detailed calculations at the end of the file
    any:
      - use: rare  # TODO: maybe combine rare_mythic with a 2:1 rate?
        chance: 837 # 83.7%
      - use: mythic
        chance: 117 # 11.7%
      - use: boosterfun
        chance: 46 #100% - 83.7% - 11.7% = 4.6% left
        filter: "r>=rare"
        # TODO: Filter out uncommon

  foil: # See detailed calculations at the end of the file
    foil: true
    any:
      - use: common
        chance: 658 # 65.8%
      - use: uncommon
        chance: 241 # 24.1%
      - use: rare # TODO: maybe combine rare_mythic with a 2:1 rate?
        chance: 78 # 7.8%
      - use: mythic
        chance: 11 # 1.1%
      - use: boosterfun
        chance: 12 # 100% - 65.8% - 24.1% - 7.8% - 1.1% = 1.2%

  non_foil_land:
    any:
      - rawquery: "{dual_land}" # Common two-color land
        chance: 50
        count: 5
      - rawquery: "{spiderweb_land}" # Spiderweb basic land
        chance: 25
        count: 5
      - rawquery: "{basic_land}" # Normal basic land
        chance: 25
        count: 5

  foil_land:
    foil: true
    use: non_foil_land

  source_material:
    rawquery: "{source_material}"
    count: 40

# TODO: Update this

########## Calculations for the wildcard slot: