# Data from: https://magic.wizards.com/en/news/feature/collecting-marvels-spider-man
# And https://magic.wizards.com/en/products/marvel/spider-man/card-image-gallery

pack:
  common_source_slot:
    - common: 7
      chance: 23
    - common: 6
      source_material: 1
      chance: 1
  uncommon_scene: 3
  wildcard: 1
  rare_mythic_boosterfun: 1
  foil: 1
  land:
    - non_foil_land: 1
      chance: 80
    - foil_land: 1
      chance: 20

queries:
  dual_land: "e:{set} number:181,183-186"
  spiderweb_land: "e:{set} number:189-193"
  basic_land: "e:{set} number:194-198"
  scene: "e:{set} number:199-207"
  web_slinger: "e:{set} number:208-217"
  panel: "e:{set} number:218-231"
  source_material: "e:MAR number:1-40"

sheets:
  common:
    query: "r:c -{dual_land}" # Regular common, no dual lands
    count: 60

  uncommon_scene:
    any:
      - use: uncommon
        rate: 1
      - rawquery: "{scene} r:u" # Uncommon scene
        rate: 1
        count: 3

  web_slinger:
    any:
      - rawquery: "{web_slinger} r:r" # Rare web slinger
        rate: 2
        count: 7
      - rawquery: "{web_slinger} r:m" # Mythic web slinger
        rate: 1
        count: 3

  boosterfun:
    any:
    - rawquery: "{web_slinger} r:r" # Rare web slinger
      rate: 2
      count: 7
    - rawquery: "{web_slinger} r:m" # Mythic web slinger
      rate: 1
      count: 3
    - rawquery: "{panel} r:r" # Rare panel
      rate: 2
      count: 10
    - rawquery: "{panel} r:m" # Mythic panel
      rate: 1
      count: 4
    - rawquery: "{scene} r:u" # Uncommon scene
      rate: 6 # TODO: Assumes an uncommon scene is 3 times more common than a rare one
      count: 3
    - rawquery: "{scene} r:r" # Rare scene
      rate: 2
      count: 4
    - rawquery: "{scene} r:m" # Mythic scene
      rate: 1
      count: 2

  wildcard:
    any:
      - use: common
        chance: 708 # 70.8%
      - use: uncommon
        chance: 41 # 4.1%
      - use: rare_mythic
        chance: 238 # 20.9% + 2.9% = 23.8%
      - use: boosterfun
        chance: 13 # 100% - 70.8% - 4.1% - 20.9% - 2.9% = 1.3%
      
  rare_mythic_boosterfun:
    any:
      - use: rare_mythic
        chance: 954 # 83.7% + 11.7% = 95.4%
      - filter: "e:spm r>=rare" # TODO: I can't make this filter work. I want to filter out the uncommon scenes.
        use: boosterfun
        chance: 46 # 100% - 83.7% - 11.7% = 4.6% left

  foil:
    foil: true
    any:
      - use: common
        chance: 658 # 65.8%
      - use: uncommon
        chance: 241 # 24.1%
      - use: rare_mythic
        chance: 89 # 7.8% + 1.1% = 8.9%
      - use: boosterfun
        chance: 12 # 100% - 65.8% - 24.1% - 7.8% - 1.1% = 1.2%

  non_foil_land:
    any:
      - rawquery: "{dual_land}" # Common two-color land
        chance: 50
        count: 5
      - rawquery: "{spiderweb_land}" # Spiderweb basic land
        chance: 25
        count: 5
      - rawquery: "{basic_land}" # Normal basic land
        chance: 25
        count: 5

  foil_land:
    foil: true
    use: non_foil_land

  source_material:
    rawquery: "{source_material}"
    count: 40


########## rare_mythic sheet:
# It seems safe to assume rares and mythics are printed in a single sheet with a 2:1 ratio.
# This ratio applies to all slots that contain rares and mythics (wildard, rare_mythic_boosterfun, foil).

########## uncommon_scene sheet:
# We are assumming that the 3 uncommon scene cards appear as often as the 55 uncommons from the main set.

########## boosterfun sheet:
# We are assumming that all boosterfun cards (web-slinger, panel and scene) have the same rarity
# appear in a similar 2:1 rare:mythic ratio.
# This doesn't exactly match the numbers provided by Wizards in the "Rare or mythic rare" slot
# but it simplifies the work a lot. Numbers are so low for these cards that it's unlkely to be relevant.