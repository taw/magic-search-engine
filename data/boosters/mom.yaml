# data from https://magic.wizards.com/en/news/feature/collecting-march-of-the-machine\
# Don't know yet if you can pull 2 battles in 1 pack. Will need to adjust as more data is available
# Don't know relative rarities of U/R/M cards in wildcard slot. Assuming 8/4/2/1 rates for now
# Don't know relative rarities of battles. Assuming 8/4/2/1 rates for now
# DOn't know relative rarities of MUL cards. Assuming 4/2/1 rates for now
pack:
  basic_or_gainland: 1
  common_or_foil:
  - sfc_common_with_showcase: 8
    chance: 2
  - sfc_common_with_showcase: 7
    foil_with_showcase_and_mul: 1
    chance: 1
  sfc_uncommon_with_showcase: 2
  dfc_wildcard: 1
  sfc_wildcard: 1
  battle: 1
  multiverse_legend: 1
sheets:
  basic_or_gainland:
    any:
    - query: "is:gainland"
      chance: 1
    - use: basic
      chance: 1
  dfc_wildcard:
    any:
    - use: dfc_common_with_showcase
      chance: 8 * 5
    - any:
      - rawquery: "e:{set} r:u promo:boosterfun -is:foilonly -frame:extendedart is:dfc is:paper"
        rate: 1
      - query: "r:u alt:(e:{set} r:u promo:boosterfun -is:foilonly -frame:extendedart) is:dfc"
        rate: 2
      - query: "r:u -alt:(e:{set} r:u promo:boosterfun -is:foilonly -frame:extendedart) is:dfc -t:battle"
        rate: 3
      chance: 4 * 10
    - any:
      - rawquery: "e:{set} r:r promo:boosterfun -is:foilonly -frame:extendedart is:dfc is:paper"
        rate: 1
      - query: "r:r alt:(e:{set} r:r promo:boosterfun -is:foilonly -frame:extendedart) is:dfc"
        rate: 2
      - query: "r:r -alt:(e:{set} r:r promo:boosterfun -is:foilonly -frame:extendedart) is:dfc -t:battle"
        rate: 3
      chance: 2 * 5
      any:
      - rawquery: "e:{set} r:m promo:boosterfun -is:foilonly -frame:extendedart is:dfc is:paper"
        rate: 1
      - query: "r:m alt:(e:{set} r:m promo:boosterfun -is:foilonly -frame:extendedart) is:dfc"
        rate: 2
      - query: "r:m -alt:(e:{set} r:m promo:boosterfun -is:foilonly -frame:extendedart) is:dfc -t:battle"
        rate: 3
      chance: 1 * 5
  sfc_wildcard:
    any:
    - use: sfc_uncommon_with_showcase
      chance: 4 * 50
    - use: sfc_rare_with_showcase
      chance: 2 * 44
    - use: sfc_mythic_with_showcase
      chance: 1 * 10
  battle:
    filter: "e:mom t:battle"
    use: base_1248_by_rarity
  multiverse_legend:
    filter: "e:mul -is:foilonly"
    use: base_1248_by_rarity
  foil_with_showcase_and_mul:
    foil: true
    any:
    - any:
      - use: common_showcase
        rate: 1
      - use: common_has_showcase
        rate: 2
      - use: common_has_no_showcase
        rate: 3
      - use: basic
        rate: 3
      chance: 12
    - any:
      - use: uncommon_showcase
        rate: 1
      - use: uncommon_has_showcase
        rate: 2
      - use: uncommon_has_no_showcase
        rate: 3
      - rawquery: "e:mul number:1-65 r:u" # Can we change the set size to make number<=set work?
        rate: 3
      chance: 5
    - any:
      - use: rare_showcase
        rate: 2
      - use: rare_has_showcase
        rate: 4
      - use: rare_has_no_showcase
        rate: 6
      - rawquery: "e:mul number:1-65 r:r"
        rate: 6
      - use: mythic_showcase
        rate: 1
      - use: mythic_has_showcase
        rate: 2
      - use: mythic_has_no_showcase
        rate: 3
      - rawquery: "e:mul number:1-65 r:m"
        rate: 3
      chance: 3